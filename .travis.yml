language: cpp
compiler: gcc

env:
  global:
  # Coverity Scan token
  - secure: "d8DnK+9sxmbfyHuqakQT0MWh38oz6d09Q8vyzrWECE/el5+Orwx9tAT59dsHNc6p3DVZiex94amAjk4jJosYsuBOAo2ONou7HpdD6dXqKqUw1CYsftwbvPHyY+krcMgo3Y5aIa68hYDyPtXVFgQFNH+vBeFOosh7O7PO4NUSp7vYw2yEP5Qb3U+40Sazb4mj4io7OlJ0kLAZj3nUn1aAOayZLW6rxaQHdWIRXvUdCJ+GfogwLXX7MMJeSwRPI0U3l3ht2PTo+xrexD1vtlnkJyBTKKR5wA8S/s/yR+DivYl2hNWYQPubEKQjvvuau/J31BIHsvRf1p1D9C1rAQjPHRUOEgtUQWtelkQA7GVFDjDYal/BtC80SCIvfc9uR3AL0HSxxnqkWqc695h2CzKIXRM60iV3g8yYRC14HX+oikNbp2rmm99ZoowWXrB5TOTHop7YLhCOS+BwuncCmRgolalGRtwwqtIR74L2fUCvOsTb6ZYgHr7o85iFq3aRZ/qZsc5vTAmJFnITBxrbtTFHAYU38br4T9gJHDtj7zE0H3s5p/e5S6m6vLTQQPQDL779kk7mcmQsr2UkktRKnXVqhXEVFozLvX3DfDm70un/EgQ6Iv6D6aakPfkp+MUpZ0SGWWF/+5kirkgnmDYZRboRX3yKLZhZUXEP0QRrjPYR+uE="
addons:
  coverity_scan:
    project:
      name: "StochasticEngineer/RandLib"
      description: "Build submitted via Travis CI"
    notification_email: samarin_ad@mail.ru
    build_command_prepend: "./configure; make clean"
    build_command: "make -j 4"
    branch_pattern: coverity_scan

before_install:
  - sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test
  - sudo apt-get update -qq
  # Coverity Scan
  - echo -n | openssl s_client -connect scan.coverity.com:443 | sed -ne '/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p' | sudo tee -a /etc/ssl/certs/ca-

install:
  - sudo apt-get install -qq g++-5
  - sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-5 90

script:
  - qmake
  - make
